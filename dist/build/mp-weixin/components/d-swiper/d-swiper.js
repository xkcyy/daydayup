"use strict";var e=require("../../common/vendor.js");const t=e.defineComponent({props:{dataSource:{type:Array,required:!0},current:{type:Number,default:0},renderSize:{type:Number,default:3}},emits:["update:current","change"],setup(t,{emit:r}){const u=t,o=e.ref(0),a=e.ref(2e3),n=e.ref(0),c=e.ref([]),l=e.ref(!1),i=e.ref(0),d=e=>{console.log("renderSwiper",e);const t=new Array;let r=0,o=u.renderSize||5;o<3&&(o=3);let l=e-Math.floor(o/2),d=l+o;for(let a=l;a<d;a++)u.dataSource[a]&&(t.push(u.dataSource[a]),a<e&&r++);setTimeout((()=>{a.value=0,c.value=t,n.value=r,i.value=e-r,console.log("cur page will be ",t[r]),setTimeout((()=>{a.value=200}),50)}),20)};e.watchEffect((()=>{u.dataSource,d(0)}));const s=function(e){if("touch"!=e.detail.source)return;l.value=!0;let t=e.detail.current;const a=u.current+t-n.value;r("update:current",a),n.value=t,o.value=a,r("change",a)},f=function(){l.value&&(l.value=!1,setTimeout((()=>{console.log(u.current),d(u.current)}),10))};return(t,r)=>({a:e.f(c.value,((t,r,u)=>({a:"d-"+u,b:e.r("d",{context:{item:t,index:i.value+r}},u),c:e.t(void function(e,t){console.log("reding item ...",e,t)}(t,r)),d:r}))),b:a.value,c:n.value,d:e.o(s),e:e.o(f)})}});wx.createComponent(t);
